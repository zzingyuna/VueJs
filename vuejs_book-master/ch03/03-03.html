<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>03-02</title>
<script src="https://unpkg.com/vue/dist/vue.min.js"></script>
</head>
<body>
<div id="example">
    금액 : <span>{{amount}}원</span>
</div>
<script type="text/javascript">
/*
   [computed 옵션].. 계산형 속성
   vue인스턴스는 프록시 처리하여 속성처럼 취급, 함수값 지정 가능.
   함수 내용을 보고 싶을땐 선언명.$options.computed.함수명
   get, set을 이용하여 계산형 속성을 쓰기 읽기 모두 가능합니다
*/
var vm = new Vue({
    el : "#example",
    data : { amt : 1234567 },
    computed : {
        amount : {
            get : function() {
                var s = new String(""+this.amt);
                var result = "";
                var num = 0;
                for (var i=s.length-1; i>=0; i--) {
                    result = s[i] + result;
                    if (num % 3 == 2 && i !== 0)
                        result = "," + result;
                    num++;
                }
                return result;
            },
            set : function(amt) {
                if (typeof(amt) === "string") {
                    var result = parseInt(amt.replace(/,/g, ""))
                    if (isNaN(result)) this.amt = 0;
                    else   this.amt = result;
                } else if (typeof(amt) === "number")
                    this.amt = amt;
            }
        }
    }
});
</script>
</body>
</html>